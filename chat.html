


<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    
        <style type='text/css'>
	.embeddedServiceHelpButton .helpButton .uiButton {
		background-color: #009F65;
		font-family: "Salesforce Sans", sans-serif;
	}
	.embeddedServiceHelpButton .helpButton .uiButton:focus {
		outline: 1px solid #009F65;
	}
	@font-face {
		font-family: 'Salesforce Sans';
		src: url('https://c1.sfdcstatic.com/etc/clientlibs/sfdc-aem-master/clientlibs_base/fonts/SalesforceSans-Regular.woff') format('woff'),
		url('https://c1.sfdcstatic.com/etc/clientlibs/sfdc-aem-master/clientlibs_base/fonts/SalesforceSans-Regular.ttf') format('truetype');
	}
</style>
<body>
<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
<script type='text/javascript'>
	var initESW = function(gslbBaseURL) {
		embedded_svc.settings.displayHelpButton = true; //Or false
		embedded_svc.settings.language = 'en'; //For example, enter 'en' or 'en-US'
		embedded_svc.settings.extraPrechatFormDetails = [
  {
        "label":"ESC User ID",
        "transcriptFields":[ "User_ID__c" ],
        "displayToAgent": false
    }, {
        "label":"Chat Token",
        "transcriptFields":[ "Hashed_Token__c" ],
        "displayToAgent": false
    }, {
        "label":"First Name",
        "transcriptFields":[ "User_First_Name__c" ],
        "displayToAgent": false
    }, {
        "label":"Last Name",
        "transcriptFields":[ "User_Last_Name__c" ],
        "displayToAgent": false
    },{
        "label":"Email",
        "transcriptFields":[ "User_Email__c" ],
        "displayToAgent": false
    },,{
        "label":"What would you like to talk about today?",
        "transcriptFields":[ "Chat_Channel__c" ],
        "displayToAgent": false
    }];

		//embedded_svc.settings.defaultMinimizedText = '...'; //(Defaults to Chat with an Expert)
		//embedded_svc.settings.disabledMinimizedText = '...'; //(Defaults to Agent Offline)

		//embedded_svc.settings.loadingText = ''; //(Defaults to Loading)
		//embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)

		// Settings for Chat
		//embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
			// Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
			// Returns a valid button ID.
		//};
		//embedded_svc.settings.prepopulatedPrechatFields = {}; //Sets the auto-population of pre-chat form fields
		//embedded_svc.settings.fallbackRouting = []; //An array of button IDs, user IDs, or userId_buttonId
		//embedded_svc.settings.offlineSupportMinimizedText = '...'; //(Defaults to Contact Us)

		// Settings for Chat
			embedded_svc.settings.autoOpenPostChat = true; // To Auto-open post chat
			embedded_svc.settings.directToButtonRouting = function (prechatFormData) {
				console.log("direct to button routing initiated." + prechatFormData[0].value);

				return prechatFormData[0].value;
			}
			embedded_svc.settings.prepopulatedPrechatFields = {
				Email: ""
			};
		embedded_svc.settings.enabledFeatures = ['LiveAgent'];
		embedded_svc.settings.entryFeature = 'LiveAgent';

		embedded_svc.init(
			'https://talktalkbusiness--ttsit.sandbox.my.salesforce.com',
			'https://talktalkbusiness--ttsit.sandbox.my.site.com/eschome',
			gslbBaseURL,
			'00D3N0000008alu',
			'ESC_Embedded_Service_Chat',
			{
				baseLiveAgentContentURL: 'https://c.la2-c1cs-cdg.salesforceliveagent.com/content',
				deploymentId: '5723W000000000Q',
				buttonId: '5733W0000008OJA',
				baseLiveAgentURL: 'https://d.la2-c1cs-cdg.salesforceliveagent.com/chat',
				eswLiveAgentDevName: 'Embedded_Chat_default_Queue',
				isOfflineSupportEnabled: false
			}
		);
	};

	if (!window.embedded_svc) {
		var s = document.createElement('script');
		s.setAttribute('src', 'https://talktalkbusiness--ttsit.sandbox.my.salesforce.com/embeddedservice/5.0/esw.min.js');
		s.onload = function() {
			initESW(null);
		};
		document.body.appendChild(s);
	} else {
		initESW('https://service.force.com');
	}
</script>
    </body>
</html>
